<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <title>LabelLab</title>
    <link rel="icon" href="{{ url_for('static', filename='logo.png') }}">

    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;800&family=Inter:wght@400;600;700;900&family=Poppins:wght@600&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: { sans: ['Inter', 'sans-serif'], mono: ['JetBrains Mono', 'monospace'], brand: ['Poppins', 'sans-serif'] },
                    colors: { bot: { bg: '#050505', card: '#0A0A0A', border: '#1E1E1E' } },
                    boxShadow: { 'glow-green': '0 0 10px rgba(34, 197, 94, 0.4)', 'glow-red': '0 0 10px rgba(239, 68, 68, 0.4)' }
                }
            }
        }
    </script>
    <style>
        /* Dark Mode Background */
        body { background-color: #050505; background-image: radial-gradient(#1a1a1a 1px, transparent 1px); background-size: 40px 40px; }
        /* Light Mode Background */
        html.light body { background-color: #f3f4f6; background-image: radial-gradient(#e5e7eb 1px, transparent 1px); }
        
        .rounded-xl, .rounded-lg, .rounded-md, .rounded { border-radius: 0px !important; }
        input:focus { box-shadow: 0 0 0 1px #fff; border-color: #fff; }
        html.light input:focus { box-shadow: 0 0 0 1px #000; border-color: #000; }
        
        @keyframes slideIn { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
    </style>
    <script>
        // --- THEME LOGIC ---
        if (localStorage.getItem('theme') === 'light') {
            document.documentElement.classList.remove('dark');
            document.documentElement.classList.add('light');
        } else {
            document.documentElement.classList.add('dark');
            document.documentElement.classList.remove('light');
        }

        function toggleTheme() {
            const html = document.documentElement;
            if (html.classList.contains('dark')) {
                html.classList.remove('dark');
                html.classList.add('light');
                localStorage.setItem('theme', 'light');
            } else {
                html.classList.remove('light');
                html.classList.add('dark');
                localStorage.setItem('theme', 'dark');
            }
            updateThemeIcon();
        }

        function updateThemeIcon() {
            const isDark = document.documentElement.classList.contains('dark');
            const btn = document.getElementById('theme-toggle-btn');
            if(isDark) {
                // Moon Icon
                btn.innerHTML = `<svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path></svg>`;
            } else {
                // Sun Icon
                btn.innerHTML = `<svg class="w-4 h-4 text-black" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg>`;
            }
        }
        
        document.addEventListener("DOMContentLoaded", updateThemeIcon);
    </script>
</head>
<body class="h-screen flex items-center justify-center selection:bg-white selection:text-black dark:selection:bg-white dark:selection:text-black">
    
    <button id="theme-toggle-btn" onclick="toggleTheme()" class="absolute top-6 right-6 p-2 border border-gray-300 dark:border-[#333] hover:bg-gray-200 dark:hover:bg-[#111] transition-colors z-50">
        </button>

    <div class="w-full max-w-md animate-[slideIn_0.5s_ease-out]">
        <div class="bg-white dark:bg-bot-card border border-gray-200 dark:border-bot-border p-8 relative overflow-hidden shadow-2xl relative">
            <div class="absolute top-0 left-0 w-full h-[1px] bg-gradient-to-r from-transparent via-black dark:via-white to-transparent opacity-20"></div>

            <div class="flex justify-between items-center mb-10">
                <h1 class="font-brand text-2xl text-black dark:text-white tracking-tight">LabelLab</h1>
                <div class="flex items-center gap-2 px-3 py-1.5 bg-green-500/10 border border-green-500/20 rounded-full">
                    <div class="w-1.5 h-1.5 bg-green-500 rounded-full shadow-glow-green animate-pulse"></div>
                    <span class="text-[10px] font-mono font-bold text-green-600 dark:text-green-500 uppercase tracking-widest">System Operational</span>
                </div>
            </div>

            {% if error %}
            <div class="mb-6 p-4 bg-red-500/10 border border-red-500/50 flex items-center gap-3 animate-[slideIn_0.2s_ease-out]">
                <div class="w-2 h-2 bg-red-500 rounded-full shadow-glow-red"></div>
                <p class="text-xs font-mono font-bold text-red-500 uppercase tracking-wider">{{ error }}</p>
            </div>
            {% endif %}

            <form method="POST" class="space-y-6">
                <div class="space-y-2">
                    <label class="text-[9px] font-bold text-gray-500 uppercase tracking-widest">User_ID</label>
                    <input type="text" name="username" placeholder="ENTER USERNAME" class="w-full p-4 bg-gray-50 dark:bg-[#050505] border border-gray-300 dark:border-bot-border text-xs font-mono text-black dark:text-white placeholder:text-gray-400 dark:placeholder:text-gray-700 outline-none transition-all focus:border-black dark:focus:border-white" required>
                </div>
                
                {% if mode == 'register' %}
                <div class="space-y-2">
                    <label class="text-[9px] font-bold text-gray-500 uppercase tracking-widest">Encrypted_Email</label>
                    <input type="email" name="email" placeholder="ENTER EMAIL ADDRESS" class="w-full p-4 bg-gray-50 dark:bg-[#050505] border border-gray-300 dark:border-bot-border text-xs font-mono text-black dark:text-white placeholder:text-gray-400 dark:placeholder:text-gray-700 outline-none transition-all focus:border-black dark:focus:border-white" required>
                </div>
                {% endif %}

                <div class="space-y-2">
                    <label class="text-[9px] font-bold text-gray-500 uppercase tracking-widest">Password_Key</label>
                    <input type="password" name="password" placeholder="ENTER PASSWORD" class="w-full p-4 bg-gray-50 dark:bg-[#050505] border border-gray-300 dark:border-bot-border text-xs font-mono text-black dark:text-white placeholder:text-gray-400 dark:placeholder:text-gray-700 outline-none transition-all focus:border-black dark:focus:border-white" required>
                </div>

                {% if mode != 'register' %}
                <div class="flex items-center gap-3">
                    <input type="checkbox" id="remember" name="remember" class="w-4 h-4 accent-black dark:accent-white bg-gray-50 dark:bg-[#050505] border-gray-300 dark:border-bot-border rounded-none cursor-pointer">
                    <label for="remember" class="text-xs font-mono font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer select-none">Remember Session?</label>
                </div>
                {% endif %}

                <button type="submit" class="w-full py-4 bg-black dark:bg-white hover:opacity-80 text-white dark:text-black text-xs font-mono font-bold uppercase tracking-widest transition-all shadow-glow">
                    {{ 'Initialize Access' if mode == 'register' else 'Authenticate' }}
                </button>
            </form>

            <div class="mt-10 text-center">
                {% if mode == 'register' %}
                <p class="text-xs font-mono text-gray-500">Already have credentials? <a href="{{ url_for('main.login') }}" class="text-black dark:text-white hover:underline font-bold ml-2">Login</a></p>
                {% else %}
                <p class="text-xs font-mono text-gray-500">Need access? <a href="{{ url_for('main.register') }}" class="text-black dark:text-white hover:underline font-bold ml-2">Register</a></p>
                {% endif %}
            </div>
        </div>
        
        <div class="mt-12 flex justify-center items-center gap-2 text-[10px] text-green-600 dark:text-green-500 font-mono uppercase tracking-widest opacity-60 hover:opacity-100 transition-opacity select-none">
            <div class="w-1.5 h-1.5 bg-green-600 dark:bg-green-500 rounded-full shadow-glow-green"></div>
            <span>{{ version }} // SECURE CONNECTION</span>
        </div>

    </div>

</body>
</html>